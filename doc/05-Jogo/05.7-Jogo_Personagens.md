# `cristal.object.gd`

Este script estende as funcionalidades de um nó `Node2D` e controla o comportamento de um objeto de cristal quando um corpo entra ou sai de sua área de colisão.

## Métodos

### `_on_cristal_collide_body_entered(body)`

Callback chamado quando um corpo entra na área de colisão do cristal:
- `body` (Node): Corpo que entrou na área de colisão.
- Se o corpo for o jogador (`body.name == "player"`):
  - Chama o método `zoom()` do corpo para zoom.
  - Libera o nó do cristal (`$cristal.queue_free()`), removendo-o da cena.

### `_on_cristal_collide_body_exited(body)`

Callback chamado quando um corpo sai da área de colisão do cristal:
- `body` (Node): Corpo que saiu da área de colisão.
- Se o corpo for o jogador (`body.name == "player"`):
  - Chama o método `zoom(false)` do corpo para desfazer o zoom.
  - Libera o nó do cristal (`queue_free()`), removendo-o da cena.

---

Este script é responsável por controlar a interação do jogador com um objeto de cristal na cena. Quando o jogador entra na área de colisão do cristal, ele realiza um zoom no jogador e então libera o cristal da cena. Quando o jogador sai da área de colisão, o zoom é revertido e o cristal é novamente liberado da cena.


# `camuflino.gd`

Este script estende as funcionalidades de um nó `CharacterBody2D` e controla o comportamento do personagem Camuflino no jogo.

## Variáveis Exportadas

### `invulnerable: bool`
Define se o Camuflino está invulnerável a danos.

### `tempoInvuneravel: int`
Define o tempo de duração da invulnerabilidade em segundos.

### `ghost_node: PackedScene`
Cena embalada para o nó do fantasma que pode ser instanciado para efeitos visuais.

### Grupo `Camera Limits`

#### `limitTop: int`
Limite superior da câmera.

#### `limitBottom: int`
Limite inferior da câmera.

#### `limitRight: int`
Limite direito da câmera.

#### `limitLeft: int`
Limite esquerdo da câmera.

## Métodos

### `_ready()`

Método chamado quando o nó entra na árvore da cena pela primeira vez. Define os limites da câmera e a posição inicial do Camuflino.

### `_physics_process(delta)`

Método chamado a cada quadro durante o processamento físico. Controla o movimento do Camuflino com base na entrada do jogador ou controles de movimento.

### `_process(delta)`

Método chamado a cada quadro. Controla a animação do Camuflino com base na direção do movimento.

### `animation(direction: Vector2)`

Controla a reprodução das animações do Camuflino com base na direção do movimento e na velocidade.

### `setIdle()`

Define a velocidade do Camuflino como zero e reproduz a animação de inatividade.

### `zoom(inOrOut: bool = true)`

Controla o efeito de zoom da câmera no Camuflino.

### `hit(damage: int, saveError: bool = false, disableHit: bool = true)`

Aplica dano ao Camuflino e inicia o tempo de recuperação (hit cooldown).

### `_on_timer_timeout()`

Callback chamado quando o timer de recuperação (hit cooldown) expira, permitindo que o Camuflino possa ser atingido novamente.

### `_on_timer_2_timeout()`

Callback chamado quando o segundo timer expira, indicando que o Camuflino está morto e recarrega a cena atual.

### `_on_animation_player_animation_finished(anim_name: String)`

Callback chamado quando uma animação do AnimationPlayer é concluída. Pausa o jogo quando a animação de zoom é finalizada.

### `_on_gui_on_dialog(onDialog: bool)`

Callback chamado quando o diálogo é ativado ou desativado na interface do usuário. Define se o Camuflino está em um estado de diálogo.

### `invulneravel()`

Ativa o efeito de invulnerabilidade no Camuflino por um período de tempo definido.

### `add_ghost()`

Instancia um efeito visual de "fantasma" que segue o Camuflino durante o jogo.

### `_on_ghost_timer_timeout()`

Callback chamado quando o timer de fantasma expira, adicionando um novo efeito de "fantasma" ao Camuflino.

---

Este script controla o movimento, animação e interações do personagem Camuflino, incluindo efeitos visuais como invulnerabilidade e efeitos de velocidade. Ele responde a entrada do jogador, controla animações de movimento e gerencia eventos como colisões e efeitos visuais na cena.




# `animation.gd`

Este script estende as funcionalidades de um nó `AnimatedSprite2D` e controla as animações de um sprite animado no jogo.

## Métodos

### `_ready()`

Método chamado quando o nó entra na árvore da cena pela primeira vez. Pode ser usado para inicializações, como iniciar o fade (transparência), se necessário.

### `set_property(tx_pos: Vector2, tx_scale: Vector2)`

Define a posição e a escala do sprite animado.

- `tx_pos`: Posição do sprite.
- `tx_scale`: Escala do sprite.

### `ghosting()`

Inicia a animação de "fantasma" para o sprite animado.

Este método executa as seguintes ações:

1. Inicia a reprodução da animação padrão (substitua `"default"` pelo nome da animação, se for diferente).
2. Cria um tween para controlar a transição de transparência (`modulate:a`) do sprite.
3. Aguarda a conclusão do tween de fade.
4. Libera o nó do sprite (`queue_free()`) após a conclusão da animação de fade.

---

Este script gerencia a animação de um sprite animado, permitindo transições suaves e efeitos visuais como o efeito de "fantasma". Ele é útil para controlar a aparência e o comportamento visual de objetos animados dentro do jogo.

# `azurea.gd`

Este script estende as funcionalidades de um nó `CharacterBody2D`, representando o comportamento e a lógica de movimento de um personagem chamado Azurea no jogo.

## Variáveis

- `animDirections`: Lista de strings contendo os nomes das animações de movimento nos diferentes direcionais.
- `SPEED`: Velocidade de movimento do personagem.
- `targets`: Lista que armazena os alvos para os quais Azurea deve voar.

## Métodos

### `_physics_process(delta: float)`

Método chamado a cada quadro para atualização física do personagem.

- Calcula a velocidade com base na posição do próximo alvo (se houver) e move Azurea na direção desse alvo.
- Se não houver alvos, a velocidade é definida como zero e o personagem para de se mover.

### `_process(delta: float)`

Método chamado a cada quadro para atualização de lógica do personagem.

- Chama o método `animation()` para gerenciar a reprodução das animações com base na velocidade do personagem.

### `flyToPutOutFire(target: Node2D)`

Adiciona um novo alvo à lista de alvos para Azurea voar.

- `target`: Nó que representa o alvo para onde Azurea deve voar.

### `animation()`

Controla a animação de Azurea com base na velocidade atual do personagem.

- Seleciona a animação adequada com base no ângulo da velocidade.
- Reproduz a animação correspondente usando o nó `AnimatedSprite2D` associado.

### `_on_navigation_agent_2d_navigation_finished()`

Método chamado quando a navegação para um alvo é concluída.

- Verifica se o primeiro alvo na lista é válido e não é nulo.
- Executa ações específicas dependendo do nome do alvo e sua validade:
  - Chama o método `putOutFire()` no alvo para extinguir o fogo.
  - Altera a cor de um nó "árvore" associado ao alvo.
  - Ativa a emissão de partículas (`CPUParticles2D`).
  - Remove o primeiro alvo da lista.
  - Incrementa a pontuação global (`Globals.score`) e atualiza a GUI.
  - Reproduz um som.
  - Atualiza a pontuação máxima (`Globals.maxScore`) se a pontuação atual for maior.
- Se o alvo atual for `initialPosition`, remove-o da lista e define o próximo alvo como a posição inicial.
- Se não houver alvos restantes na lista, define o próximo alvo como a posição inicial.
- Atualiza a posição de destino do `NavigationAgent2D` para o próximo alvo na lista.

---

Este script define o comportamento de movimento e interação do personagem Azurea dentro do jogo. Ele gerencia a navegação para alvos específicos, executa ações ao alcançar esses alvos e controla a animação do personagem com base na direção de movimento. Além disso, cuida da atualização da pontuação global e da interação com outros elementos do jogo, como partículas e efeitos sonoros.


# `neutro.gd`

Este script estende as funcionalidades de um nó `CharacterBody2D`, representando o comportamento e a lógica de movimento de um inimigo neutro no jogo.

## Variáveis

- `attentionSong`: Som carregado usado quando o inimigo começa a perseguir o jogador.
- `desistSong`: Som carregado usado quando o inimigo desiste de perseguir o jogador.
- `target`: Alvo atual que o inimigo está perseguindo.
- `isChase`: Flag que indica se o inimigo está atualmente perseguindo o jogador.
- `ignoreChaseZone`: Flag que, se verdadeira, impede que o inimigo entre na zona de perseguição.
- `stopChasing`: Flag que, se verdadeira, faz com que o inimigo pare de perseguir o jogador quando ele sai da área.
- `chaseDistance`: Distância máxima a partir da qual o inimigo pode começar a perseguir o jogador.
- `player`: Referência ao jogador na cena.
- `initialPosition`: Posição inicial do inimigo.
- `finalPosition`: Posição final de patrulha do inimigo.
- `SPEED`: Velocidade de movimento normal do inimigo.
- `RUN_SPEED`: Velocidade de movimento durante a perseguição.
- `acceleration`: Aceleração gradual do inimigo durante a perseguição.
- `animDirections`: Lista de strings contendo os nomes das animações de movimento nos diferentes direcionais.
- `runDirection`: Lista de strings contendo os nomes das animações de movimento durante a perseguição.
- `_velocity`: Velocidade atual do inimigo.

## Métodos

### `_ready()`

Método chamado quando o nó entra na árvore de cena.

- Inicializa a posição inicial do inimigo e calcula a posição final de patrulha.

### `_physics_process(delta: float)`

Método chamado a cada quadro para atualização física do inimigo.

- Calcula a velocidade do inimigo com base no estado de perseguição (`isChase`) e na posição do próximo alvo.
- Se não estiver perseguindo, calcula a rota de patrulha.

### `_process(delta: float)`

Método chamado a cada quadro para atualização de lógica do inimigo.

- Verifica colisões com o jogador usando um `Area2D` (`$hit`) e aplica um knockback se o jogador não estiver invulnerável.
- Chama o método `animation()` para gerenciar a reprodução das animações com base na velocidade do inimigo.

### `animation()`

Controla a animação do inimigo com base na velocidade atual.

- Seleciona a animação adequada com base no ângulo da velocidade.
- Reproduz a animação correspondente usando o nó `AnimationPlayer` associado.

### `calculatePatrolRoute()`

Calcula a próxima posição de patrulha do inimigo com base na sua posição atual.

### `_on_area_2d_body_entered(body)`

Método chamado quando um corpo entra na área de detecção.

- Verifica se o corpo é o jogador e inicia a perseguição.

### `_on_area_2d_body_exited(body)`

Método chamado quando um corpo sai da área de detecção.

- Verifica se o corpo é o jogador e, se `stopChasing` for verdadeira, encerra a perseguição.

### `_on_timer_timeout()`

Método chamado quando o temporizador (`$Timer`) expira.

- Define a posição de destino do `NavigationAgent2D` para o alvo atual (`target`).

### `_on_navigation_agent_2d_navigation_finished()`

Método chamado quando a navegação para um alvo é concluída.

- Se não estiver perseguindo, inicia o temporizador de patrulha (`$patrolTimer`).
- Se estiver perseguindo, redefine a posição de destino do `NavigationAgent2D` para o alvo atual (`target`).

### `_on_patrol_timer_timeout()`

Método chamado quando o temporizador de patrulha (`$patrolTimer`) expira.

- Zera a `finalPosition` para interromper a patrulha.

### `setChasing(chase = true)`

Inicia ou encerra a perseguição do inimigo.

- `chase`: Booleano que indica se a perseguição deve ser iniciada (`true`) ou encerrada (`false`).
- Reproduz sons específicos e ajusta a visibilidade de uma área (`$area`) durante a perseguição.
- Atualiza a posição de destino do `NavigationAgent2D` para o alvo atual (`target`).

### `_on_navigation_agent_2d_velocity_computed(safe_velocity)`

Método chamado quando a velocidade segura é calculada pelo `NavigationAgent2D`.

- Define a velocidade do inimigo como a velocidade segura calculada e aplica movimento e deslizamento.

---

Este script define o comportamento de movimento e interação do inimigo neutro dentro do jogo. Ele gerencia a patrulha automática do inimigo, sua capacidade de detectar e perseguir o jogador, e as interações durante e após a perseguição. Além disso, controla as animações do inimigo com base em sua velocidade e gerencia a lógica de colisão com o jogador e outros elementos do jogo.


# `boss01.gd`

Este script controla o comportamento do primeiro chefe (boss01) no jogo, usando um nó `Node2D`.

## Variáveis

- `anim`: Referência ao nó `AnimatedSprite2D` para controlar as animações do chefe.
- `fire`: Referência ao nó que controla o efeito de fogo.
- `frame`: Contador que armazena o número do quadro atual da animação.
- `inFire`: Booleano que indica se o chefe está atualmente em estado de fogo.

## Métodos

### `_ready()`

Método chamado quando o nó entra na árvore de cena pela primeira vez.

- Inicia a animação do chefe como "IDLE".

### `_process(delta: float)`

Método chamado a cada quadro para atualização lógica do chefe.

- Atualiza a variável `frame` com o número do quadro atual da animação.

### `hit()`

Reproduz o som de impacto (`$hit`) quando o chefe é atingido.

### `win()`

Reproduz o som de vitória (`$win` e `$winAudio`) quando o chefe vence.

### `fogo()`

Inicia a animação de fogo do chefe.

- Aguarda até que o chefe esteja na animação "IDLE" (`aguardar_idle()`).
- Alterna `inFire` para verdadeiro.
- Altera a animação para "FIRE".
- Inicia a reprodução da animação de fogo (`$fire`) e do som (`$fireRobot`).
- Aguarda até que a animação de fogo esteja completa (`aguardar_fogo()`).
- Alterna `inFire` para falso.
- Retorna à animação "IDLE".

### `_on_button_pressed()`

Callback chamado quando um botão (presumivelmente um gatilho) é pressionado.

- Chama o método `fogo()` para iniciar a sequência de fogo do chefe.

### `aguardar_fogo()`

Espera até que a animação do chefe esteja na quadragésima nona moldura.

### `aguardar_idle()`

Espera até que a animação do chefe esteja na primeira ou segunda moldura.

### `secondStage()`

Muda a cor do próprio nó `AnimatedSprite2D` para vermelho.

---

Este script gerencia o comportamento do chefe no jogo, incluindo a transição entre animações, a execução de efeitos especiais (como fogo) e a resposta a ações do jogador (como ser atingido ou vencer). Ele controla também estados internos como `inFire` para gerenciar a lógica de animação e reprodução de som de forma coordenada com as ações visuais do chefe.

# `ProgressBar.gd`

Este script estende a classe `ProgressBar` para criar um componente de barra de progresso customizado que gerencia uma vida total (`vidaTotal`) e a vida atual (`vida`).

## Variáveis

- `vidaTotal`: Variável exportada que define a quantidade total de vida da barra.
- `vida`: Variável que armazena a vida atual da barra.

## Métodos

### `_ready()`

Método chamado quando o nó entra na árvore de cena pela primeira vez.

- Define o valor máximo da barra de progresso (`max_value`) com base em `vidaTotal`.
- Inicializa `vida` com o valor de `vidaTotal`.

### `_process(delta: float)`

Método chamado a cada quadro para atualização lógica da barra de progresso.

- Atualiza o valor da barra de progresso (`value`) com o valor atual de `vida`.

### `_on_button_pressed()`

Callback chamado quando um botão é pressionado.

- Reduz `vida` em 1.
- Imprime o valor atual de `vida` no console.

### `damage()`

Método que reduz a vida atual (`vida`) em 1.

---

Este script proporciona um controle básico sobre uma barra de progresso, onde a quantidade de vida (`vida`) é atualizada dinamicamente através de métodos como `_on_button_pressed()` e `damage()`. Ele reflete visualmente a vida restante em relação à vida total definida por `vidaTotal`, facilitando o monitoramento e gerenciamento de recursos ou estados similares no jogo.
